---
title: 我是如何因为错误理解C++数组初始化而空耗2小时的
published: 2025-10-30
description: '在C++数组初始化上踩的坑'
image: ''
tags: []
category: 
draft: false
---

## 正确的用法  

### 整数型与浮点型  

整数型的操作与浮点型相差不大，以下全部用整数型演示  

#### 如果你只想要将数组初始化为0  

无论是不是在主函数外，你都可以：

    // 方式1：使用大括号（推荐）
    int A[30][30] = {0};

    // 方式2：使用空大括号（C++11起）
    int B[30][30] = {};

    // 方式3：使用嵌套大括号
    int C[30][30] = {{0}};

    // 方式4：值初始化（C++11）
    int D[30][30]{};
在主函数外时，单单一个 `int E[30][30];` 也可以起到相同作用：

    #include <iostream>
    using namespace std;
    int E[30][30];
    int main (){
        for (int i = 0; i < 30; i++){
            for (int j = 0; j < 30; j++){
                cout << E[i][j] << endl;
            }
        }
        return 0;
    }

#### 如果你想把数组初始化为某个非0的数  

使用std::fill(最推荐):

    #include <iostream>
    #include <algorithm>  // 需要包含这个头文件
    using namespace std;
    int main() {
        int A[30][30];
        fill(&A[0][0], &A[0][0] + 30 * 30, 7);  // 初始化为7
        // 验证
        cout << A[0][0] << endl;
        return 0;
    }
也可以这样：

    #include <iostream>
    #include <algorithm>
    using namespace std;
    int main() {
        int A[30][30];
        fill(A[0], A[0] + 30 * 30,7);  // 初始化为7
        // 验证
        cout << A[14][5] << endl;
        return 0;
    }
还可以这样用（这样需要一维数组）：

    #include <iostream>
    #include <algorithm>
    using namespace std;
    int main() {
        int A[30];
        fill(A, A + 30, 7);  // 初始化为7
        // 验证
        cout << A[5] << endl;
        return 0;
    }

嵌套循环（最易懂）：

    #include <iostream>
    using namespace std;
    int main() {
        int A[30][30];
        for (int i = 0; i < 30; i++) {
            for (int j = 0; j < 30; j++) {
                A[i][j] = 5;  // 初始化为5
            }
        }
        // 验证
        cout << A[29][29] << endl;
        return 0;
    }

memset（只能为0或-1）：

    #include <iostream>
    #include <cstring>
    using namespace std;
    int main() {
        int A[30][30];
        // 设置为-1（所有字节都是0xFF）
        memset(A, -1, sizeof(A));
        // 如果用memset设置非0非-1的值,例如
        // memset(arr, 1, sizeof(arr));  
        // 每个int会变成0x01010101，不是1
        // 验证
        cout << A[14][5] << endl;
        return 0;
    }

#### 如果你想手动指定某个位置为某个数  

不怕累的话就一个个打吧：

    #include <iostream>
    using namespace std;
    int main() {
        int A[3][3] = {
            {1, 2, 3},
            {4, 5, 6},
            {7, 8, 9}
        };
        // 验证
        cout << A[1][1] << endl;
        return 0;
    }

### 字符串型

#### 如果你想把数组初始化化为空  

无论是不是在主函数外，你都可以：

    // C风格字符数组的不同初始化方式
    char S1[30][30] = {0};     // 全部初始化为'\0'
    char S2[30][30] = {};      // C++11: 全部初始化为'\0'
    
    // std::string数组的不同初始化方式
    string strS1[30][30];      // 即使是局部声明string也能正确初始化
    string strS2[30][30] = {}; // 显式初始化为空字符串

在主函数外时， `char S3[30][30];` 也可行的：  

    #include <iostream>
    using namespace std;
    char S3[30][30];
    int main (){
        cout << S3[10][10] //里面的数字只要不越界随便填
        return 0;
    }

#### 如果你想把数组初始化为某个字符

## 我之前错误的理解
